/*
  * Example file
  */
// ----------------------
// Example file
// ----------------------

// ---- Const definitions ----
const int MAX_COUNT = 100 // max count
const bool ENABLE_FEATURE = true /* enable feature */
const string DEFAULT_NAME = "guest" /*
  * default name
  */

// ---- Enum definition ----
enum ErrCode {
    ErrOk = 0
    PARAM_ERROR = 1003
}

// ---- Type definition ----
type UserReq {
    string userId
}

//---- User definition 1 ----
/*
  * User info
 */
//---- User definition 2 ----
type User {
    any name ( go.type="*string" , a="123")
    int? age
    binary avatar
    // embedded type
    Address? /* embedded */
    Payload payload
}

type Address {
    string street
    string city
    string country
}

oneof Payload {
    string title
    string? body
}

// Generic type definition
type Response<T> {
    int errno
    string errmsg
    T data
}

// ---- RPC definitions ----
rpc GetUser (UserReq) UserResponse {
    go.type="*string"
    method="GET"
    path="/user"
}

// ---- type re-definition ----
type UserResponse Response<list<User?>>
